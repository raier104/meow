{% extends "base.html" %}
{% block title %}Profile - MEOW{% endblock %}
{% block content %}
<div style="max-width:600px;margin:2rem auto;padding:0 20px;">
    <!-- Profile Card -->
    <div style="background:#fff;border-radius:20px;box-shadow:0 8px 32px rgba(0,0,0,0.1);overflow:hidden;">
        
        <!-- Header Section with Gradient -->
        <div style="background:linear-gradient(135deg, #2c5f5f 0%, #ff6b35 100%);padding:2rem;text-align:center;color:#fff;">
            <div style="position:relative;display:inline-block;margin-bottom:1rem;">
                {% if user.photo %}
                    <img src="{{ user.photo.url }}" alt="Profile Photo" style="width:120px;height:120px;border-radius:50%;object-fit:cover;border:4px solid #fff;box-shadow:0 4px 16px rgba(0,0,0,0.2);">
                {% else %}
                    <div style="width:120px;height:120px;border-radius:50%;background:rgba(255,255,255,0.2);display:flex;align-items:center;justify-content:center;border:4px solid #fff;box-shadow:0 4px 16px rgba(0,0,0,0.2);">
                        <svg width="60" height="60" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="16" cy="16" r="15" stroke="#fff" stroke-width="2"/>
                            <circle cx="16" cy="13" r="4" stroke="#fff" stroke-width="2"/>
                            <path d="M8 24c0-3.5 4-5.5 8-5.5s8 2 8 5.5" stroke="#fff" stroke-width="2" fill="none" stroke-linecap="round"/>
                        </svg>
                    </div>
                {% endif %}
                <!-- Profile completion indicator -->
                <div style="position:absolute;bottom:5px;right:5px;background:#28a745;color:#fff;border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center;font-size:18px;border:3px solid #fff;">
                    âœ“
                </div>
            </div>
            <h1 style="margin:0;font-size:2rem;font-weight:700;">{{ user.get_full_name|default:user.username }}</h1>
            <p style="margin:0.5rem 0 0 0;opacity:0.9;font-size:1.1rem;">Welcome back to MEOW!</p>
        </div>

        <!-- Profile Information -->
        <div style="padding:2rem;">
            <h3 style="color:#2c5f5f;margin-bottom:1.5rem;font-size:1.3rem;display:flex;align-items:center;gap:8px;">
                <svg width="20" height="20" fill="#2c5f5f" viewBox="0 0 24 24">
                    <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H19C20.11 23 21 22.11 21 21V9M19 9H14V4H5V21H19V9Z"/>
                </svg>
                Profile Information
            </h3>
            
            <div style="display:grid;gap:1rem;">
                <div style="background:#f8f9fa;padding:1rem;border-radius:10px;border-left:4px solid #ff6b35;">
                    <strong style="color:#2c5f5f;">Username:</strong>
                    <span style="margin-left:8px;">{{ user.username }}</span>
                </div>
                <div style="background:#f8f9fa;padding:1rem;border-radius:10px;border-left:4px solid #2c5f5f;">
                    <strong style="color:#2c5f5f;">Email:</strong>
                    <span style="margin-left:8px;">{{ user.email }}</span>
                </div>
                <div style="background:#f8f9fa;padding:1rem;border-radius:10px;border-left:4px solid #28a745;">
                    <strong style="color:#2c5f5f;">User Type:</strong>
                    <span style="margin-left:8px;background:#28a745;color:#fff;padding:2px 8px;border-radius:12px;font-size:0.85rem;">{{ user.user_type|capfirst }}</span>
                </div>
            </div>
        </div>

        <!-- Photo Upload Section -->
        <div style="background:#f8fdff;padding:2rem;border-top:1px solid #e9ecef;">
            <h3 style="color:#2c5f5f;margin-bottom:1rem;display:flex;align-items:center;gap:8px;">
                <svg width="20" height="20" fill="#2c5f5f" viewBox="0 0 24 24">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                </svg>
                Update Profile Photo
            </h3>
            <form method="post" enctype="multipart/form-data" style="display:flex;flex-direction:column;gap:1rem;">
                {% csrf_token %}
                <div style="display:flex;align-items:center;gap:1rem;flex-wrap:wrap;">
                    <input type="file" name="photo" id="photo" accept="image/*" style="flex:1;padding:10px;border:2px solid #e9ecef;border-radius:8px;background:#fff;">
                    <button type="submit" style="background:linear-gradient(135deg, #2c5f5f 0%, #ff6b35 100%);color:#fff;padding:12px 24px;border:none;border-radius:8px;font-weight:600;cursor:pointer;white-space:nowrap;transition:transform 0.3s;">
                        ðŸ“¸ Update Photo
                    </button>
                </div>
                <p style="margin:0;color:#666;font-size:0.9rem;">Choose a photo that represents you. Max file size: 5MB</p>
            </form>
        </div>

        <!-- Action Buttons -->
        <div style="padding:2rem;background:#fff;">
            <h3 style="color:#2c5f5f;margin-bottom:1.5rem;display:flex;align-items:center;gap:8px;">
                <svg width="20" height="20" fill="#2c5f5f" viewBox="0 0 24 24">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
                Quick Actions
            </h3>
            
            <div style="display:grid;gap:1rem;">
                <!-- Previous Orders and Appointments -->
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
                    <form action="{% url 'shop:previous_orders' %}" method="get" style="margin:0;">
                        <button type="submit" style="background:#2c5f5f;color:#fff;padding:15px 20px;border:none;border-radius:12px;font-weight:600;cursor:pointer;width:100%;display:flex;align-items:center;justify-content:center;gap:8px;transition:transform 0.3s;">
                            <svg width="18" height="18" fill="#fff" viewBox="0 0 24 24">
                                <path d="M7 4V2C7 1.45 7.45 1 8 1S9 1.45 9 2V4H15V2C15 1.45 15.45 1 16 1S17 1.45 17 2V4H20C21.11 4 22 4.89 22 6V20C22 21.11 21.11 22 20 22H4C2.89 22 2 21.11 2 20V6C2 4.89 2.89 4 4 4H7Z"/>
                            </svg>
                            Previous Orders
                        </button>
                    </form>
                    <form action="{% url 'vets:my_appointments' %}" method="get" style="margin:0;">
                        <button type="submit" style="background:#ff6b35;color:#fff;padding:15px 20px;border:none;border-radius:12px;font-weight:600;cursor:pointer;width:100%;display:flex;align-items:center;justify-content:center;gap:8px;transition:transform 0.3s;">
                            <svg width="18" height="18" fill="#fff" viewBox="0 0 24 24">
                                <path d="M19 3H18V1H16V3H8V1H6V3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V8H19V19Z"/>
                            </svg>
                            My Appointments
                        </button>
                    </form>
                </div>
                
                <!-- Logout Button -->
                <form method="post" action="{% url 'users:logout' %}" style="margin:0;">
                    {% csrf_token %}
                    <button type="submit" style="background:linear-gradient(135deg, #dc3545 0%, #c82333 100%);color:#fff;padding:15px 20px;border:none;border-radius:12px;font-weight:600;cursor:pointer;width:100%;display:flex;align-items:center;justify-content:center;gap:8px;transition:all 0.3s;">
                        <svg width="18" height="18" fill="#fff" viewBox="0 0 24 24">
                            <path d="M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.59L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z"/>
                        </svg>
                        Logout
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
button:hover {
    transform: translateY(-2px);
}
</style>
{% endblock %}
