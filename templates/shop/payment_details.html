{% extends "base.html" %}
{% block title %}Payment Details - MEOW{% endblock %}
{% block content %}
<div style="max-width:600px;margin:2rem auto;padding:0 20px;">
    <!-- Header -->
    <div style="text-align:center;margin-bottom:2rem;">
        <h1 style="color:#2c5f5f;font-size:2.2rem;margin-bottom:0.5rem;display:flex;align-items:center;justify-content:center;gap:12px;">
            <svg width="32" height="32" fill="#ff6b35" viewBox="0 0 24 24">
                <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H19C20.11 23 21 22.11 21 21V9M19 9H14V4H5V21H19V9Z"/>
            </svg>
            Payment Details
        </h1>
        <p style="color:#666;font-size:1.1rem;">Enter your payment information</p>
    </div>

    <!-- Payment Details Card -->
    <div style="background:#fff;border-radius:20px;box-shadow:0 8px 32px rgba(0,0,0,0.1);overflow:hidden;">
        <!-- Amount Header -->
        <div style="background:linear-gradient(135deg, #2c5f5f 0%, #ff6b35 100%);padding:2rem;color:#fff;text-align:center;">
            <h3 style="margin:0 0 0.5rem 0;font-size:1.1rem;opacity:0.9;">Final Amount</h3>
            <div style="font-size:2.5rem;font-weight:700;">
                {% if discounted_total and coupon > 0 %}
                    {{ discounted_total|floatformat:2 }}
                {% else %}
                    {{ total|floatformat:2 }}
                {% endif %}
                <span style="font-size:1.5rem;"> TK</span>
            </div>
            {% if coupon and coupon > 0 %}
            <div style="margin-top:0.5rem;padding:8px 16px;background:rgba(255,255,255,0.2);border-radius:20px;display:inline-block;">
                <small>üéâ {{ coupon }}% discount applied! Original: {{ total|floatformat:2 }} TK</small>
            </div>
            {% endif %}
        </div>

        <!-- Form -->
        <form method="post" action="{% url 'shop:payment_success' %}" style="padding:2rem;">
            {% csrf_token %}
            <input type="hidden" name="payment_method" value="{{ method }}">
            
            <h3 style="color:#2c5f5f;margin-bottom:1.5rem;font-size:1.3rem;text-transform:capitalize;">{{ method }} Payment</h3>
            
            {% if method == "bkash" or method == "nagad" or method == "rocket" or method == "upay" or method == "pathao" %}
                <div style="display:grid;gap:1.5rem;">
                    <div>
                        <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#2c5f5f;">Mobile Number</label>
                        <input type="text" name="mobile" required placeholder="Enter your mobile number" style="width:100%;padding:15px;border:2px solid #e9ecef;border-radius:12px;font-size:1rem;transition:border-color 0.3s;">
                    </div>
                    <div>
                        <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#2c5f5f;">Transaction ID</label>
                        <input type="text" name="trxid" required placeholder="Enter transaction ID" style="width:100%;padding:15px;border:2px solid #e9ecef;border-radius:12px;font-size:1rem;transition:border-color 0.3s;">
                    </div>
                </div>
            {% elif method == "dbbl" or method == "ebl" or method == "brac" %}
                <div style="display:grid;gap:1.5rem;">
                    <div>
                        <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#2c5f5f;">Account Number</label>
                        <input type="text" name="account" required placeholder="Enter account number" style="width:100%;padding:15px;border:2px solid #e9ecef;border-radius:12px;font-size:1rem;transition:border-color 0.3s;">
                    </div>
                    <div>
                        <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#2c5f5f;">Reference Number</label>
                        <input type="text" name="reference" required placeholder="Enter reference number" style="width:100%;padding:15px;border:2px solid #e9ecef;border-radius:12px;font-size:1rem;transition:border-color 0.3s;">
                    </div>
                </div>
            {% elif method == "paypal" %}
                <div>
                    <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#2c5f5f;">PayPal Email</label>
                    <input type="email" name="paypal_email" required placeholder="Enter your PayPal email" style="width:100%;padding:15px;border:2px solid #e9ecef;border-radius:12px;font-size:1rem;transition:border-color 0.3s;">
                </div>
            {% elif method == "visa" or method == "mastercard" %}
                <div style="display:grid;gap:1.5rem;">
                    <div>
                        <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#2c5f5f;">Card Number</label>
                        <input type="text" name="card_number" required placeholder="1234 5678 9012 3456" maxlength="19" style="width:100%;padding:15px;border:2px solid #e9ecef;border-radius:12px;font-size:1rem;transition:border-color 0.3s;">
                    </div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
                        <div>
                            <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#2c5f5f;">Expiry Date</label>
                            <input type="text" name="expiry" placeholder="MM/YY" required maxlength="5" style="width:100%;padding:15px;border:2px solid #e9ecef;border-radius:12px;font-size:1rem;transition:border-color 0.3s;">
                        </div>
                        <div>
                            <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#2c5f5f;">CVV</label>
                            <input type="text" name="cvv" placeholder="123" required maxlength="4" style="width:100%;padding:15px;border:2px solid #e9ecef;border-radius:12px;font-size:1rem;transition:border-color 0.3s;">
                        </div>
                    </div>
                </div>
            {% endif %}
            
            <!-- Action Buttons -->
            <div style="display:flex;justify-content:space-between;margin-top:2rem;gap:1rem;">
                <a href="{% url 'shop:payment' %}" style="background:#6c757d;color:#fff;padding:15px 32px;border-radius:25px;font-weight:600;text-decoration:none;display:flex;align-items:center;gap:8px;">
                    ‚Üê Back
                </a>
                <button type="submit" style="background:linear-gradient(135deg, #28a745 0%, #20c997 100%);color:#fff;padding:15px 32px;border-radius:25px;font-weight:600;border:none;cursor:pointer;display:flex;align-items:center;gap:8px;box-shadow:0 4px 15px rgba(40,167,69,0.3);">
                    Complete Payment
                </button>
            </div>
        </form>
    </div>
</div>

<style>
input:focus {
    border-color: #ff6b35 !important;
    outline: none;
    box-shadow: 0 0 0 3px rgba(255,107,53,0.1);
}
</style>
{% endblock %}
